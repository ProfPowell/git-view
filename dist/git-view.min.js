/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const e=new WeakMap,t=t=>"function"==typeof t&&e.has(t),n="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,i=(e,t,n=null)=>{for(;t!==n;){const n=t.nextSibling;e.removeChild(t),t=n}},s={},r={},o=`{{lit-${String(Math.random()).slice(2)}}}`,a=`\x3c!--${o}--\x3e`,l=new RegExp(`${o}|${a}`);class c{constructor(e,t){this.parts=[],this.element=t;const n=[],i=[],s=document.createTreeWalker(t.content,133,null,!1);let r=0,a=-1,c=0;const{strings:d,values:{length:u}}=e;for(;c<u;){const e=s.nextNode();if(null!==e){if(a++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:n}=t;let i=0;for(let e=0;e<n;e++)h(t[e].name,"$lit$")&&i++;for(;i-- >0;){const t=d[c],n=p.exec(t)[2],i=n.toLowerCase()+"$lit$",s=e.getAttribute(i);e.removeAttribute(i);const r=s.split(l);this.parts.push({type:"attribute",index:a,name:n,strings:r}),c+=r.length-1}}"TEMPLATE"===e.tagName&&(i.push(e),s.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(o)>=0){const i=e.parentNode,s=t.split(l),r=s.length-1;for(let t=0;t<r;t++){let n,r=s[t];if(""===r)n=g();else{const e=p.exec(r);null!==e&&h(e[2],"$lit$")&&(r=r.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),n=document.createTextNode(r)}i.insertBefore(n,e),this.parts.push({type:"node",index:++a})}""===s[r]?(i.insertBefore(g(),e),n.push(e)):e.data=s[r],c+=r}}else if(8===e.nodeType)if(e.data===o){const t=e.parentNode;null!==e.previousSibling&&a!==r||(a++,t.insertBefore(g(),e)),r=a,this.parts.push({type:"node",index:a}),null===e.nextSibling?e.data="":(n.push(e),a--),c++}else{let t=-1;for(;-1!==(t=e.data.indexOf(o,t+1));)this.parts.push({type:"node",index:-1}),c++}}else s.currentNode=i.pop()}for(const e of n)e.parentNode.removeChild(e)}}const h=(e,t)=>{const n=e.length-t.length;return n>=0&&e.slice(n)===t},d=e=>-1!==e.index,g=()=>document.createComment(""),p=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class u{constructor(e,t,n){this.__parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this.__parts)void 0!==n&&n.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=n?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],i=this.template.parts,s=document.createTreeWalker(e,133,null,!1);let r,o=0,a=0,l=s.nextNode();for(;o<i.length;)if(r=i[o],d(r)){for(;a<r.index;)a++,"TEMPLATE"===l.nodeName&&(t.push(l),s.currentNode=l.content),null===(l=s.nextNode())&&(s.currentNode=t.pop(),l=s.nextNode());if("node"===r.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(l.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,r.name,r.strings,this.options));o++}else this.__parts.push(void 0),o++;return n&&(document.adoptNode(e),customElements.upgrade(e)),e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const m=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),v=` ${o} `;class b{constructor(e,t,n,i){this.strings=e,this.values=t,this.type=n,this.processor=i}getHTML(){const e=this.strings.length-1;let t="",n=!1;for(let i=0;i<e;i++){const e=this.strings[i],s=e.lastIndexOf("\x3c!--");n=(s>-1||n)&&-1===e.indexOf("--\x3e",s+1);const r=p.exec(e);t+=null===r?e+(n?v:a):e.substr(0,r.index)+r[1]+r[2]+"$lit$"+r[3]+o}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==m&&(t=m.createHTML(t)),e.innerHTML=t,e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const f=e=>null===e||!("object"==typeof e||"function"==typeof e),y=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class w{constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let e=0;e<n.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new x(this)}_getValue(){const e=this.strings,t=e.length-1,n=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=n[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!y(e))return e}let i="";for(let s=0;s<t;s++){i+=e[s];const t=n[s];if(void 0!==t){const e=t.value;if(f(e)||!y(e))i+="string"==typeof e?e:String(e);else for(const t of e)i+="string"==typeof t?t:String(t)}}return i+=e[t],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class x{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===s||f(e)&&e===this.value||(this.value=e,t(e)||(this.committer.dirty=!0))}commit(){for(;t(this.value);){const e=this.value;this.value=s,e(this)}this.value!==s&&this.committer.commit()}}class k{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(g()),this.endNode=e.appendChild(g())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=g()),e.__insert(this.endNode=g())}insertAfterPart(e){e.__insert(this.startNode=g()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=s,e(this)}const e=this.__pendingValue;e!==s&&(f(e)?e!==this.value&&this.__commitText(e):e instanceof b?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):y(e)?this.__commitIterable(e):e===r?(this.value=r,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof u&&this.value.template===t)this.value.update(e.values);else{const n=new u(t,e.processor,this.options),i=n._clone();n.update(e.values),this.__commitNode(i),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,i=0;for(const s of e)n=t[i],void 0===n&&(n=new k(this.options),t.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(t[i-1])),n.setValue(s),n.commit(),i++;i<t.length&&(t.length=i,this.clear(n&&n.endNode))}clear(e=this.startNode){i(this.startNode.parentNode,e.nextSibling,this.endNode)}}class _{constructor(e,t,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this.__pendingValue=e}commit(){for(;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=s,e(this)}if(this.__pendingValue===s)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=s}}class E extends w{constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new S(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class S extends x{}let A=!1;(()=>{try{const e={get capture(){return A=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class N{constructor(e,t,n){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=s,e(this)}if(this.__pendingValue===s)return;const e=this.__pendingValue,n=this.value,i=null==e||null!=n&&(e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive),r=null!=e&&(null==n||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=C(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=s}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const C=e=>e&&(A?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;const $=new class{handleAttributeExpressions(e,t,n,i){const s=t[0];if("."===s){return new E(e,t.slice(1),n).parts}if("@"===s)return[new N(e,t.slice(1),i.eventContext)];if("?"===s)return[new _(e,t.slice(1),n)];return new w(e,t,n).parts}handleTextExpression(e){return new k(e)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function F(e){let t=L.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},L.set(e.type,t));let n=t.stringsArray.get(e.strings);if(void 0!==n)return n;const i=e.strings.join(o);return n=t.keyString.get(i),void 0===n&&(n=new c(e,e.getTemplateElement()),t.keyString.set(i,n)),t.stringsArray.set(e.strings,n),n}const L=new Map,T=new WeakMap,j=(e,t,n)=>{let s=T.get(t);void 0===s&&(i(t,t.firstChild),T.set(t,s=new k(Object.assign({templateFactory:F},n))),s.appendInto(t)),s.setValue(e),s.commit()};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const z=(e,...t)=>new b(e,t,"html",$);var M=z`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="122.881px" height="122.88px" viewBox="0 0 122.881 122.88" enable-background="new 0 0 122.881 122.88" xml:space="preserve"><g><path d="M61.44,0c16.966,0,32.326,6.877,43.445,17.996c11.119,11.118,17.996,26.479,17.996,43.444 c0,16.967-6.877,32.326-17.996,43.444C93.766,116.003,78.406,122.88,61.44,122.88c-16.966,0-32.326-6.877-43.444-17.996 C6.877,93.766,0,78.406,0,61.439c0-16.965,6.877-32.326,17.996-43.444C29.114,6.877,44.474,0,61.44,0L61.44,0z M80.16,37.369 c1.301-1.302,3.412-1.302,4.713,0c1.301,1.301,1.301,3.411,0,4.713L65.512,61.444l19.361,19.362c1.301,1.301,1.301,3.411,0,4.713 c-1.301,1.301-3.412,1.301-4.713,0L60.798,66.157L41.436,85.52c-1.301,1.301-3.412,1.301-4.713,0c-1.301-1.302-1.301-3.412,0-4.713 l19.363-19.362L36.723,42.082c-1.301-1.302-1.301-3.412,0-4.713c1.301-1.302,3.412-1.302,4.713,0l19.363,19.362L80.16,37.369 L80.16,37.369z M100.172,22.708C90.26,12.796,76.566,6.666,61.44,6.666c-15.126,0-28.819,6.13-38.731,16.042 C12.797,32.62,6.666,46.314,6.666,61.439c0,15.126,6.131,28.82,16.042,38.732c9.912,9.911,23.605,16.042,38.731,16.042 c15.126,0,28.82-6.131,38.732-16.042c9.912-9.912,16.043-23.606,16.043-38.732C116.215,46.314,110.084,32.62,100.172,22.708 L100.172,22.708z"></path></g></svg>`,V=z`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 98.15" style="enable-background:new 0 0 122.88 98.15" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M6.02,0h33.66L50.8,12.3h66.46c3.1,0,5.63,2.55,5.63,5.63V92.5c0,3.1-2.53,5.64-5.63,5.64l-110.59,0 C3.56,98.15,0,95.6,0,92.5V6.02C0,2.72,2.72,0,6.02,0L6.02,0z M111.83,27.42c0-2.98-2.46-5.42-5.43-5.42H17.46 c-2.96,0-6.41,2.44-6.41,5.42v53.8c0,3,3.45,5.43,6.41,5.43h88.95c2.97,0,5.43-2.44,5.43-5.43V27.42L111.83,27.42z"></path></g></svg>`,P=z`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="64" height="64" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 640 640"><path d="M319.988 7.973C143.293 7.973 0 151.242 0 327.96c0 141.392 91.678 261.298 218.826 303.63 16.004 2.964 21.886-6.957 21.886-15.414 0-7.63-.319-32.835-.449-59.552-89.032 19.359-107.8-37.772-107.8-37.772-14.552-36.993-35.529-46.831-35.529-46.831-29.032-19.879 2.209-19.442 2.209-19.442 32.126 2.245 49.04 32.954 49.04 32.954 28.56 48.922 74.883 34.76 93.131 26.598 2.882-20.681 11.15-34.807 20.315-42.803-71.08-8.067-145.797-35.516-145.797-158.14 0-34.926 12.52-63.485 32.965-85.88-3.33-8.078-14.291-40.606 3.083-84.674 0 0 26.87-8.61 88.029 32.8 25.512-7.075 52.878-10.642 80.056-10.76 27.2.118 54.614 3.673 80.162 10.76 61.076-41.386 87.922-32.8 87.922-32.8 17.398 44.08 6.485 76.631 3.154 84.675 20.516 22.394 32.93 50.953 32.93 85.879 0 122.907-74.883 149.93-146.117 157.856 11.481 9.921 21.733 29.398 21.733 59.233 0 42.792-.366 77.28-.366 87.804 0 8.516 5.764 18.473 21.992 15.354 127.076-42.354 218.637-162.274 218.637-303.582 0-176.695-143.269-319.988-320-319.988l-.023.107z"></path></svg>`,H=z`
<style>
  :host(gv-directory) {
    display: block;
    height: 100%;
    font-size:0.8rem;
    color: white;
    border-right: 1px solid #424242;
  }
  .folder {
    display: flex;
    align-items:center;
  }
  .folder-icon {
    display: flex;
    align-items: center;
    height: 15px;
    padding: 2px;
    margin-right: 4px;
  }
  .folder-icon svg {
    height: 70%;
    fill: #2196f3;
  }
  .folder, .gv-directory-item {
    cursor: pointer;
    padding: 0.3rem;
  }
   .folder:hover, .gv-directory-item:hover {
    background: gray;
  }
  .gv-directory-folder {
    display: block;
  }
  
  .gv-directory-folder > * {
    padding-left: 1rem;
  }
  .gv-directory-item {
    display: block;
    padding-top: 0.4rem;
  }
  .container {
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  .gv-top {
    display: flex;
    align-items: center;
    padding-left: 8px;
    min-height: 30px;
    width: 100%;
    background: #212121;
    color: white;
    font-size: 0.8rem;
  }
  .gv-directory {
    height: 100%;
    overflow: scroll;
    margin: 0 0.5rem;
  }
</style>
<div class="container">
  <section class="gv-top"><div class="folder-icon">${V}</div>Files</section>
  <section class="gv-directory"></section>
</div>
`;class I extends HTMLElement{constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.root.addEventListener("click",(e=>{const t=e.target.getAttribute("data-path");t&&this.dispatchEvent(new CustomEvent("file-click",{detail:t}))}),!0)}set tree(e){this._tree=e,this.render()}get tree(){return this._tree}render(){j(H,this.root);const e=new Map;this.tree.forEach((t=>{let n=this.root.querySelector(".gv-directory");if(t.path.includes("/")){let i="";t.path.split("/").slice(0,-1).forEach((t=>{if(e.has(i+"/"+t))i=i+"/"+t,n=e.get(i);else{const s=document.createElement("div");s.className="gv-directory-folder";const r=z`<div class="folder"><div class="folder-icon">${V}</div><div class="folder-name">${t}</div></div>`;j(r,s),n.appendChild(s),n=s,i+="/"+t,e.set(i,s)}}))}if("blob"===t.type){const e=document.createElement("div");e.className="gv-directory-item",e.setAttribute("data-path",t.path),e.innerHTML=t.path.split("/").pop(),n.appendChild(e)}}))}}var O=z`
  <style>
  * {
    box-sizing: border-box;
  }
  :host(gv-preview) {
    width: 100%;
    height: 100%;
    position: absolute;
    flex: 1;
    z-index: 1;
  }
  .container {
    width: 100%;
    height: 100%;
  }
  .top {
    height: 100%;
    display: flex;
    justify-content: space-between;
    padding: 0 0.4rem;
    align-items: center;
    height: 30px;
    width: 100%;
    background: #212121;
    color: white;
    font-size: 0.8rem;
  }

  .close {
    display: block;
    padding: 0.2rem 0.4rem;
    margin-right: 0.4rem;
    background: #2196f3;
    color: white;
    border: 1px solid #2196f3;
    font-size: 0.8rem;
    white-space: nowrap;
    cursor: pointer;
    width: 50px;
    text-align: center;
    user-select: none;
    outline: 0;
  }

  iframe {
    height: 100%;
    width: 100%;
    border: 0px;
    background: white;
  }
  </style>
  <div class="container">
    <div class="top">
      <div>Preview</div>
      <button class="close">Close</button>
    </div>
    <div class="preview">
      <iframe></iframe>
    </div>
  </div>
`;class q extends HTMLElement{constructor(){super(),this.root=this.attachShadow({mode:"open"})}static get observedAttributes(){return["repo","gist"]}attributeChangedCallback(){this.render()}render(){const e=this.getAttribute("repo"),t=this.getAttribute("page"),n=this.getAttribute("branch"),i=this.getAttribute("gist");if(e||i)if(j(O,this.root),this.root.querySelector(".close").addEventListener("click",(e=>{this.dispatchEvent(new CustomEvent("close-preview"))}),!0),e)fetch(`https://api.github.com/repos/${e}/contents/${t}?ref=${n}`).then((e=>e.json())).then((t=>{let n=this.root.querySelector("iframe"),i=atob(t.content);const s=i.indexOf("<head>")+6;i=i.slice(0,s)+`<base href="https://${e.split("/")[0]}.github.io/${e.split("/")[1]}">`+i.slice(s),n.src="data:text/html;base64,"+encodeURIComponent(btoa(i))})).catch((e=>{console.error("Github page could not be found")}));else{let e=this.root.querySelector("iframe"),t=this.cache.get(this.getAttribute("gist"));const n=(new DOMParser).parseFromString(t,"text/html"),i=n.documentElement.querySelector("head"),s=document.createElement("base");s.setAttribute("href",this.getAttribute("gist-url")),i.appendChild(s),n.documentElement.querySelectorAll("script").forEach((e=>{const t=e.getAttribute("src");if(t){const n=this.cache.get(t.split("/").pop());n&&(e.innerHTML=n,e.removeAttribute("src"))}})),n.documentElement.querySelectorAll("link").forEach((e=>{const t=e.getAttribute("href");if(t){const n=this.cache.get(t.split("/").pop());if(n){const t=document.createElement("style");t.innerHTML=n,e.parentElement.removeChild(e),i.appendChild(t)}}})),e.src="data:text/html;base64,"+encodeURIComponent(btoa((new XMLSerializer).serializeToString(n.documentElement)))}else console.error("The owner and repo attribute must be specified.")}}let B={},U=function(){let e=/\blang(?:uage)?-([\w-]+)\b/i,t=0;var n=B.Prism={manual:B.Prism&&B.Prism.manual,disableWorkerMessageHandler:B.Prism&&B.Prism.disableWorkerMessageHandler,util:{encode:e=>e instanceof i?new i(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," "),type:e=>Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1],objId:e=>(e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id),clone(e,t){var i=n.util.type(e);switch(t=t||{},i){case"Object":if(t[n.util.objId(e)])return t[n.util.objId(e)];var s={};for(var r in t[n.util.objId(e)]=s,e)e.hasOwnProperty(r)&&(s[r]=n.util.clone(e[r],t));return s;case"Array":if(t[n.util.objId(e)])return t[n.util.objId(e)];s=[];return t[n.util.objId(e)]=s,e.forEach((function(e,i){s[i]=n.util.clone(e,t)})),s}return e}},languages:{extend(e,t){var i=n.util.clone(n.languages[e]);for(var s in t)i[s]=t[s];return i},insertBefore(e,t,i,s){var r=(s=s||n.languages)[e];if(2==arguments.length){for(var o in i=arguments[1])i.hasOwnProperty(o)&&(r[o]=i[o]);return r}var a={};for(var l in r)if(r.hasOwnProperty(l)){if(l==t)for(var o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);a[l]=r[l]}return n.languages.DFS(n.languages,(function(t,n){n===s[e]&&t!=e&&(this[t]=a)})),s[e]=a},DFS(e,t,i,s){for(var r in s=s||{},e)e.hasOwnProperty(r)&&(t.call(e,r,e[r],i||r),"Object"!==n.util.type(e[r])||s[n.util.objId(e[r])]?"Array"!==n.util.type(e[r])||s[n.util.objId(e[r])]||(s[n.util.objId(e[r])]=!0,n.languages.DFS(e[r],t,r,s)):(s[n.util.objId(e[r])]=!0,n.languages.DFS(e[r],t,null,s)))}},plugins:{},highlightAll(e,t){n.highlightAllUnder(document,e,t)},highlightAllUnder(e,t,i){var s={callback:i,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",s);for(var r,o=s.elements||e.querySelectorAll(s.selector),a=0;r=o[a++];)n.highlightElement(r,!0===t,s.callback)},highlightElement(t,i,s){for(var r,o,a=t;a&&!e.test(a.className);)a=a.parentNode;a&&(r=(a.className.match(e)||[,""])[1].toLowerCase(),o=n.languages[r]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+r,t.parentNode&&(a=t.parentNode,/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+r));var l={element:t,language:r,grammar:o,code:t.textContent};if(n.hooks.run("before-sanity-check",l),!l.code||!l.grammar)return l.code&&(n.hooks.run("before-highlight",l),l.element.textContent=l.code,n.hooks.run("after-highlight",l)),void n.hooks.run("complete",l);if(n.hooks.run("before-highlight",l),i&&B.Worker){var c=new Worker(n.filename);c.onmessage=function(e){l.highlightedCode=e.data,n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,s&&s.call(l.element),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},c.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else l.highlightedCode=n.highlight(l.code,l.grammar,l.language),n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,s&&s.call(t),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},highlight(e,t,s){var r={code:e,grammar:t,language:s};return n.hooks.run("before-tokenize",r),r.tokens=n.tokenize(r.code,r.grammar),n.hooks.run("after-tokenize",r),i.stringify(n.util.encode(r.tokens),r.language)},matchGrammar(e,t,i,s,r,o,a){var l=n.Token;for(var c in i)if(i.hasOwnProperty(c)&&i[c]){if(c==a)return;var h=i[c];h="Array"===n.util.type(h)?h:[h];for(var d=0;d<h.length;++d){var g=h[d],p=g.inside,u=!!g.lookbehind,m=!!g.greedy,v=0,b=g.alias;if(m&&!g.pattern.global){var f=g.pattern.toString().match(/[imuy]*$/)[0];g.pattern=RegExp(g.pattern.source,f+"g")}g=g.pattern||g;for(var y=s,w=r;y<t.length;w+=t[y].length,++y){var x=t[y];if(t.length>e.length)return;if(!(x instanceof l)){if(m&&y!=t.length-1){if(g.lastIndex=w,!(N=g.exec(e)))break;for(var k=N.index+(u?N[1].length:0),_=N.index+N[0].length,E=y,S=w,A=t.length;E<A&&(S<_||!t[E].type&&!t[E-1].greedy);++E)k>=(S+=t[E].length)&&(++y,w=S);if(t[y]instanceof l)continue;C=E-y,x=e.slice(w,S),N.index-=w}else{g.lastIndex=0;var N=g.exec(x),C=1}if(N){u&&(v=N[1]?N[1].length:0);_=(k=N.index+v)+(N=N[0].slice(v)).length;var $=x.slice(0,k),F=x.slice(_),L=[y,C];$&&(++y,w+=$.length,L.push($));var T=new l(c,p?n.tokenize(N,p):N,b,N,m);if(L.push(T),F&&L.push(F),Array.prototype.splice.apply(t,L),1!=C&&n.matchGrammar(e,t,i,y,w,!0,c),o)break}else if(o)break}}}}},tokenize(e,t,i){var s=[e],r=t.rest;if(r){for(var o in r)t[o]=r[o];delete t.rest}return n.matchGrammar(e,s,t,0,0,!1),s},hooks:{all:{},add(e,t){var i=n.hooks.all;i[e]=i[e]||[],i[e].push(t)},run(e,t){var i=n.hooks.all[e];if(i&&i.length)for(var s,r=0;s=i[r++];)s(t)}}},i=n.Token=function(e,t,n,i,s){this.type=e,this.content=t,this.alias=n,this.length=0|(i||"").length,this.greedy=!!s};return i.stringify=function(e,t,s){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map((n=>i.stringify(n,t,e))).join("");let r={type:e.type,content:i.stringify(e.content,t,s),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:s};if(e.alias){let t="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(r.classes,t)}n.hooks.run("wrap",r);let o=Object.keys(r.attributes).map((e=>e+'="'+(r.attributes[e]||"").replace(/"/g,"&quot;")+'"')).join(" ");return`<${r.tag} class="${r.classes.join(" ")}"${o?" "+o:""}>${r.content}</${r.tag}>`},B.document?B.Prism:B.addEventListener?(n.disableWorkerMessageHandler||B.addEventListener("message",(e=>{var t=JSON.parse(e.data),i=t.language,s=t.code,r=t.immediateClose;B.postMessage(n.highlight(s,n.languages[i],i)),r&&B.close()}),!1),B.Prism):B.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=U),"undefined"!=typeof global&&(global.Prism=U),U.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/(^|[^\\])["']/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},U.languages.markup.tag.inside["attr-value"].inside.entity=U.languages.markup.entity,U.hooks.add("wrap",(e=>{"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),U.languages.xml=U.languages.markup,U.languages.html=U.languages.markup,U.languages.mathml=U.languages.markup,U.languages.svg=U.languages.markup,U.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^{}\s][^{};]*?(?=\s*\{)/,string:{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},U.languages.css.atrule.inside.rest=U.languages.css,U.languages.markup&&(U.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\s\S]*?>)[\s\S]*?(?=<\/style>)/i,lookbehind:!0,inside:U.languages.css,alias:"language-css",greedy:!0}}),U.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:U.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:U.languages.css}},alias:"language-css"}},U.languages.markup.tag)),U.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},U.languages.javascript=U.languages.extend("clike",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|NaN|Infinity)\b|(?:\b\d+\.?\d*|\B\.\d+)(?:[Ee][+-]?\d+)?/,function:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\()/i,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),U.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[[^\]\r\n]+]|\\.|[^/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=\s*(?:function\b|(?:\([^()]*\)|[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/i,alias:"function"},constant:/\b[A-Z][A-Z\d_]*\b/}),U.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${[^}]+}|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\${[^}]+}/,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}}}),U.languages.javascript["template-string"].inside.interpolation.inside.rest=U.languages.javascript,U.languages.markup&&U.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,inside:U.languages.javascript,alias:"language-javascript",greedy:!0}}),U.languages.js=U.languages.javascript;var W=z`
<style>
* {
  box-sizing: border-box;
}
:host(gv-tabs) {
  height: 100%;
  display: flex;
  align-items: center;
  height: 30px;
  width: 100%;
  background: #212121;
  color: white;
  font-size: 0.8rem;
  overflow: scroll;
}
:host(gv-tabs)::-webkit-scrollbar {
  display: none;
}
.gv-top__tabs {
  display: flex;
  height: 100%;
}
.tab {
  height: 100%;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.2rem 8px;
  border-right: 1px solid #424242;
  border-left: 1px solid #424242;
}
.tab--active {
  background: #2196f3;
  color: white;
}
.close {
  height: 12px;
  margin-left: 5px;
  width: 12px;
  user-select: none;
}
.close svg {
  height: 100%;
  width: 100%;
  fill: white;
}
</style>
<div class="gv-top__tabs">
</div>
`;class D extends HTMLElement{constructor(){super(),this.current,this.tabs=new Set,this.root=this.attachShadow({mode:"open"})}static get observedAttributes(){return["current"]}attributeChangedCallback(){this.render()}connectedCallback(){j(W,this.root),this.tabsElement=this.root.querySelector(".gv-top__tabs"),this.tabsElement.addEventListener("click",(e=>{const t=e.path.find((e=>e.className&&"close"===e.className));if(t){const e=t.getAttribute("data-url");this.closeTab(e),this.dispatchEvent(new CustomEvent("close",{detail:{tab:e,next:this.current}})),this.render()}else e.target.className.includes("tab")&&(this.setActiveTab(e.target),this.dispatchEvent(new CustomEvent("active",{detail:{tab:e.target.getAttribute("data-url")}})))}))}updateActive(e){this.tabs.add(e),this.current=e,this.render(e)}setActiveTab(e){if(this.current){this.root.querySelector(`[data-url="${this.current}"]`).classList.remove("tab--active")}this.current=e.getAttribute("data-url"),e.classList.add("tab--active")}closeTab(e){if(e===this.current)if(this.tabs.size>1){this.current=null,this.tabs.delete(e);const t=[...this.tabs];this.setActiveTab(this.root.querySelector(`[data-url="${t.shift()}"]`))}else this.current=null,this.tabs.delete(e);else this.tabs.delete(e),this.render()}render(){const e=[];this.tabs.forEach((t=>{e.push(z`<div class="tab ${this.current===t?"tab--active":""}" data-url="${t}">
        ${t} <div class="close" data-url="${t}">${M}</div>
      </div>`)})),j(z`${e}`,this.root.querySelector(".gv-top__tabs"))}}var R=z`<style>
  ${'/*\nSolarized Color Schemes originally by Ethan Schoonover\nhttp://ethanschoonover.com/solarized\n\nPorted for PrismJS by Hector Matos\nWebsite: https://krakendev.io\nTwitter Handle: https://twitter.com/allonsykraken)\n*/\n\n/*\nSOLARIZED HEX\n--------- -------\nbase03    #002b36\nbase02    #073642\nbase01    #586e75\nbase00    #657b83\nbase0     #839496\nbase1     #93a1a1\nbase2     #eee8d5\nbase3     #fdf6e3\nyellow    #b58900\norange    #cb4b16\nred       #dc322f\nmagenta   #d33682\nviolet    #6c71c4\nblue      #268bd2\ncyan      #2aa198\ngreen     #859900\n*/\n\ncode[class*="language-"],\npre[class*="language-"] {\n color: #657b83; /* base00 */\n font-family: Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\n font-size: 1em;\n text-align: left;\n white-space: pre;\n word-spacing: normal;\n word-break: normal;\n word-wrap: normal;\n\n line-height: 1.5;\n\n -moz-tab-size: 4;\n -o-tab-size: 4;\n tab-size: 4;\n\n -webkit-hyphens: none;\n -moz-hyphens: none;\n -ms-hyphens: none;\n hyphens: none;\n}\n\npre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,\ncode[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {\n background: #073642; /* base02 */\n}\n\npre[class*="language-"]::selection, pre[class*="language-"] ::selection,\ncode[class*="language-"]::selection, code[class*="language-"] ::selection {\n background: #073642; /* base02 */\n}\n\n/* Code blocks */\npre[class*="language-"] {\n padding: 1em;\n margin: .5em 0;\n overflow: auto;\n border-radius: 0.3em;\n}\n\n:not(pre) > code[class*="language-"],\npre[class*="language-"] {\n background-color: #fdf6e3; /* base3 */\n}\n\n/* Inline code */\n:not(pre) > code[class*="language-"] {\n padding: .1em;\n border-radius: .3em;\n}\n\n.token.comment,\n.token.prolog,\n.token.doctype,\n.token.cdata {\n color: #93a1a1; /* base1 */\n}\n\n.token.punctuation {\n color: #586e75; /* base01 */\n}\n\n.namespace {\n opacity: .7;\n}\n\n.token.property,\n.token.tag,\n.token.boolean,\n.token.number,\n.token.constant,\n.token.symbol,\n.token.deleted {\n color: #268bd2; /* blue */\n}\n\n.token.selector,\n.token.attr-name,\n.token.string,\n.token.char,\n.token.builtin,\n.token.url,\n.token.inserted {\n color: #2aa198; /* cyan */\n}\n\n.token.entity {\n color: #657b83; /* base00 */\n background: #eee8d5; /* base2 */\n}\n\n.token.atrule,\n.token.attr-value,\n.token.keyword {\n color: #859900; /* green */\n}\n\n.token.function,\n.token.class-name {\n color: #b58900; /* yellow */\n}\n\n.token.regex,\n.token.important,\n.token.variable {\n color: #cb4b16; /* orange */\n}\n\n.token.important,\n.token.bold {\n font-weight: bold;\n}\n.token.italic {\n font-style: italic;\n}\n\n.token.entity {\n cursor: help;\n}\n'}
  :host(gv-code-viewer) {
    display: flex;
    flex-direction: column;
    flex: 1;
    width: 100%;
    background: white;
    height: 100%;
    overflow: scroll;
  }
  .container {
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
  }
  pre {
    height: calc(100%);
    z-index: 1;
    overflow: scroll;
    margin: 0;
    padding: 0rem 1rem 1rem 0;
  }
  .line-num {
    display: inline-block;
    margin-right: 0.2rem;
    padding-left: 1rem;
    background: #d4d4d4;
    color: gray;
  }
  .code-top {
    display: flex;
    background: #212121;
    align-items: center;
    justify-content: space-between;
    height: 30px;
  }
  .code-top > * {
    height:30px;
  }
  .preview {
    display: block;
    padding: 0.2rem 0.4rem;
    margin: 0 0.4rem;
    background: #2196f3;
    color: white;
    border: 1px solid #2196f3;
    font-size: 0.8rem;
    height: 100%;
    white-space: nowrap;
    cursor: pointer;
    user-select: none;
    outline: 0;
  }
  #placeholder {
    height: calc(100%);
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    background: #585858;
    color: #9a9a9a;
    z-index: 0;
  }
  #placeholder.hidden {
    display: none;
  }
  #image-container {
    position: absolute;
    top: 30px;
    height: calc(100% - 30px);
    width: 100%;
  }
  #image-container iframe {
    height: 100%;
    width: 100%;
    background: #585858;
  }
  #image-container.hidden {
    display: none;
  }
  #read-only {
    background: #dadada;
    border: 1px solid #9e9e9e;
    position: absolute;
    bottom: 0;
    right: 0;
    margin: 10px;
    padding: 0.3rem;
    color: #7b7b7b;
    font-size: 0.8rem;
  }
</style>
<div class="container">
  <section class="code-top">
    <gv-tabs></gv-tabs>
    <div><button class="preview">Preview</button></div>
  </section>
    <div id="placeholder">Select a file from the directory</div>
  <pre></pre>
  <div id="read-only">Read-only</div>
  <div id="image-container">
  </div>
</div>
`;class G extends HTMLElement{constructor(){super(),this.root=this.attachShadow({mode:"open"}),j(R,this.root),this.preElement=this.root.querySelector("pre"),this.tabsElement=this.root.querySelector("gv-tabs"),this.imgContainer=this.root.querySelector("#image-container"),this.cache=null,this.tabsElement.addEventListener("active",(e=>{this.loadViewer(this.cache.get(e.detail.tab),e.detail.tab)})),this.tabsElement.addEventListener("close",(e=>{this.loadViewer(this.cache.get(e.detail.next),e.detail.next)})),this.root.querySelector(".preview").addEventListener("click",(e=>{this.dispatchEvent(new CustomEvent("show-preview"))}),!0)}static get observedAttributes(){return["data-path"]}attributeChangedCallback(){this.render(),this.tabsElement.updateActive(this.getAttribute("data-path"))}render(){j(R,this);const e=this.getAttribute("data-path");this.loadViewer(this.cache.get(e),e)}loadViewer(e,t){var n;if(this.preElement.innerHTML="",this.imgContainer.innerHTML="",this.imgContainer.className="hidden",t)if(n=t,["png","gif","jpg","jpeg","svg","webp"].some((e=>n.indexOf(e)>-1))){const e=document.createElement("iframe"),n=`<!DOCTYPE html>\n        <html>\n        <head>\n          <style>\n            html,body {\n              margin:0;\n              padding:0;\n              height:100%;\n              width:100%;\n            }\n            body {\n              display: flex;\n              justify-content: center;\n              align-items: center;\n            }\n          </style>\n        <base href="${this.getAttribute("gist-url")}"/></head>\n          <body>\n            <img style="width: 50%;" src="${t}"/>\n          </body>\n        </html>`;e.src="data:text/html;base64,"+encodeURIComponent(btoa(n)),this.imgContainer.className="",this.imgContainer.appendChild(e)}else if(t){const n=document.createElement("code"),{fn:i,ext:s}=function(e){const t=e.split(".").pop();return U.languages[t]?{fn:U.languages[t],ext:t}:{fn:U.languages.markup,ext:"markup"}}(t),r=U.highlight(e,i,s);n.innerHTML=r.split("\n").map(((e,t)=>`<span class="line-num">${(t+1).toString().padStart(2," ")}.</span> ${e}`)).join("\n"),this.preElement.appendChild(n),this.root.querySelector("#placeholder").classList="hidden"}else this.root.querySelector("#placeholder").classList="";else this.root.querySelector("#placeholder").classList=""}}customElements.define("gv-tabs",D);var X=z`
<style>
  * {
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  }
  :host {
    --background: #424242;
    --border-color: #212121;
    display: flex;
    flex-direction: column;
    background-color: var(--background);
    border-right: 1px solid var(--border-color);
    height: 100%;
    width: 100%;
   }
  .gv-footer {
    display: flex;
    align-items: center;
    height: 30px;
    width: 100%;
    background: var(--border-color);
    color: white;
    font-size: 0.8rem;
    padding: 0px;
    justify-content: space-between;
  }
 
  .gv-footer a {
    display: flex;
    align-items: center;
    height: 100%;
    color: white;
    text-decoration: none;
    padding: 5px;
  }
  .gv-footer a:hover {
    text-decoration: underline;
  }
  .gv-footer a img {
    height: 90%;
    margin-right: 0.5rem;
    fill: white;
  }
  .gv-footer__brand {
    margin-right: 0.4rem;
  }

  .content {
    display: flex;
    height: 100%;
    overflow: hidden;
  }
  gv-directory {
    width: 200px;
    min-width: 200px;
  }
  gv-code-viewer {
    width: 100%;
  }
  gv-preview.hidden {
    display: none;
  }
  .footer-icon {
    height: 15px;
    width: 15px;
    margin: 0 5px;
  }
  .footer-icon svg {
    height: 100%;
    width: 100%;
    fill: white;
  }
  .content__right {
    display: flex;
    position: relative;
    flex: 1;
  }
</style>
<section class="content">
  <gv-directory></gv-directory>
  <section class="content__right">
    <gv-code-viewer></gv-code-viewer>
    <gv-preview></gv-preview>
  </section>
</section>
<section class="gv-footer">
  <div class="gv-footer__title">
  </div>
  <div class="gv-footer__brand">
  </div>
</section>
`;class J extends HTMLElement{constructor(){super(),this.root=this.attachShadow({mode:"open"}),this.cache=new Map,this.elements={code:null,preview:null,directory:null},this.repo,this.branch,this.page,this.gist,this._gistKey,this._gistUrl,this._tree}static get observedAttributes(){return["repo","preview-branch","preview-page","gist"]}attributesChangedCallback(){this.fetchFromGit()}connectedCallback(){this.repo=this.getAttribute("repo"),this.branch=this.getAttribute("preview-branch")||"gh-pages",this.page=this.getAttribute("preview-page")||"index.html",this.gist=this.getAttribute("gist"),this.render(),this.fetchFromGit()}fetchFromGit(){this.repo&&this.branch&&this.page?fetch(`https://api.github.com/repos/${this.repo}/git/trees/master?recursive=1`).then((e=>e.json())).then((({tree:e})=>{this._tree=e,this.setFooter(`https://github.com/${this.repo}`,this.repo),this.postFetch()})).catch((e=>console.error(e))):this.gist&&this.page&&fetch(`https://api.github.com/gists/${this.gist}`).then((e=>e.json())).then((({files:e})=>{Object.keys(e).forEach((t=>{this.cache.set(t,e[t].content)})),this._tree=Object.keys(e).map((e=>({path:e,type:"blob"}))),this._gistUrl=e[Object.keys(e)[0]].raw_url.split("/").slice(0,-1).join("/"),this.setFooter(`https://gist.github.com/${this._gistUrl.split("/")[3]}/${this.gist}`,`gist: ${this.gist}`),this.postFetch()})).catch((e=>{console.error(e)}))}postFetch(){this.renderDirectory(),this.elements.code.cache=this.cache,this.elements.preview.cache=this.cache,this._gistUrl&&this.elements.code.setAttribute("gist-url",this._gistUrl),this.renderPreview(),this.setEventListeners()}renderDirectory(){this.elements.directory.tree=this._tree}renderPreview(){const e=this.elements.preview;this.repo?(e.setAttribute("page",this.page),e.setAttribute("branch",this.branch),e.setAttribute("repo",this.repo)):this.gist&&(e.setAttribute("gist-url",this._gistUrl),e.setAttribute("gist",this.page))}renderCode(e){this.elements.code.setAttribute("data-path",e),this.elements.preview.className="hidden"}setGistCache(e){const t=[];let n,i;Object.keys(e).forEach((s=>{if(this.cache.set(s,e[s].content),t.push({path:s,type:"blob"}),s===this.page){n=s;const t=e[s].raw_url.split("/").slice(0,-1).join("/");this.root.querySelector("gv-preview").setAttribute("raw-url",t),this.root.querySelector("gv-code-viewer").rawUrl=t,i=t.split("/")[3]}})),n&&this.root.querySelector("gv-preview").setAttribute("gist",n),this.root.querySelector("gv-directory").tree=t,this.setFooter(`https://gist.github.com/${i}/${this.gist}`,`gist: ${this.gist}`)}render(){j(X,this.root),this.elements.directory=this.root.querySelector("gv-directory"),this.elements.code=this.root.querySelector("gv-code-viewer"),this.elements.preview=this.root.querySelector("gv-preview"),this.elements.footerLink=this.root.querySelector(".gv-footer__title")}setEventListeners(){this.elements.directory.addEventListener("file-click",(e=>{const t=e.detail,n=`https://raw.githubusercontent.com/${this.repo}/master/${t}`;this.cache.has(t)?this.renderCode(t):fetch(n).then((e=>e.text())).then((e=>{e=function(e){let t=(new XMLSerializer).serializeToString(document.createTextNode(e));return t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t}(e),this.cache.set(t,e),this.renderCode(t)})).catch((e=>{console.error(e)}))})),this.elements.code.addEventListener("show-preview",(e=>{this.elements.preview.className=""})),this.elements.preview.addEventListener("close-preview",(e=>{this.elements.preview.className="hidden"}))}setFooter(e,t){j(z`<a href="url">
        <div class="footer-icon">${P}</div>
        ${t}
      </a>`,this.elements.footerLink)}}customElements.define("gv-directory",I),customElements.define("gv-preview",q),customElements.define("gv-code-viewer",G);export default J;